{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/lperez/Workspace/Development/fullstack/guaira_app/apps/guaira-pos-web/app/services/api.ts"],"sourcesContent":["import axios, { type AxiosInstance, AxiosError } from 'axios';\nimport type { ApiResponse } from '../types';\n\n// Get API URL from environment or use default\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:9300/api';\n\nclass ApiClient {\n  private client: AxiosInstance;\n\n  constructor() {\n    this.client = axios.create({\n      baseURL: API_URL,\n      timeout: 30000,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Request interceptor - add auth token\n    this.client.interceptors.request.use(\n      (config) => {\n        const token = localStorage.getItem('auth_token');\n        if (token) {\n          config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      }\n    );\n\n    // Response interceptor - handle errors\n    this.client.interceptors.response.use(\n      (response) => response,\n      async (error: AxiosError) => {\n        if (error.response?.status === 401) {\n          // Clear auth data and redirect to login\n          localStorage.removeItem('auth_token');\n          localStorage.removeItem('user');\n          window.location.href = '/login';\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  // Generic request methods\n  async get<T>(url: string, params?: any): Promise<ApiResponse<T>> {\n    try {\n      const response = await this.client.get<ApiResponse<T>>(url, { params });\n      return response.data;\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n\n  async post<T>(url: string, data?: any): Promise<ApiResponse<T>> {\n    try {\n      const response = await this.client.post<ApiResponse<T>>(url, data);\n      return response.data;\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n\n  async put<T>(url: string, data?: any): Promise<ApiResponse<T>> {\n    try {\n      const response = await this.client.put<ApiResponse<T>>(url, data);\n      return response.data;\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n\n  async patch<T>(url: string, data?: any): Promise<ApiResponse<T>> {\n    try {\n      const response = await this.client.patch<ApiResponse<T>>(url, data);\n      return response.data;\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n\n  async delete<T>(url: string): Promise<ApiResponse<T>> {\n    try {\n      const response = await this.client.delete<ApiResponse<T>>(url);\n      return response.data;\n    } catch (error) {\n      return this.handleError(error);\n    }\n  }\n\n  private handleError(error: any): ApiResponse<never> {\n    if (axios.isAxiosError(error)) {\n      const message = error.response?.data?.message || error.message;\n      return {\n        success: false,\n        error: message,\n      };\n    }\n    return {\n      success: false,\n      error: 'An unexpected error occurred',\n    };\n  }\n}\n\n// Create and export a singleton instance\nexport const apiClient = new ApiClient();\n"],"names":[],"mappings":";;;;AAAA;;AAGA,8CAA8C;AAC9C,MAAM,UAAU,iEAAmC;AAEnD,MAAM;IACI,OAAsB;IAE9B,aAAc;QACZ,IAAI,CAAC,MAAM,GAAG,gJAAK,CAAC,MAAM,CAAC;YACzB,SAAS;YACT,SAAS;YACT,SAAS;gBACP,gBAAgB;YAClB;QACF;QAEA,uCAAuC;QACvC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAClC,CAAC;YACC,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;YAClD;YACA,OAAO;QACT,GACA,CAAC;YACC,OAAO,QAAQ,MAAM,CAAC;QACxB;QAGF,uCAAuC;QACvC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CACnC,CAAC,WAAa,UACd,OAAO;YACL,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;gBAClC,wCAAwC;gBACxC,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;gBACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;YACA,OAAO,QAAQ,MAAM,CAAC;QACxB;IAEJ;IAEA,0BAA0B;IAC1B,MAAM,IAAO,GAAW,EAAE,MAAY,EAA2B;QAC/D,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,CAAiB,KAAK;gBAAE;YAAO;YACrE,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC,WAAW,CAAC;QAC1B;IACF;IAEA,MAAM,KAAQ,GAAW,EAAE,IAAU,EAA2B;QAC9D,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAiB,KAAK;YAC7D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC,WAAW,CAAC;QAC1B;IACF;IAEA,MAAM,IAAO,GAAW,EAAE,IAAU,EAA2B;QAC7D,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,CAAC,MAAM,CAAC,GAAG,CAAiB,KAAK;YAC5D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC,WAAW,CAAC;QAC1B;IACF;IAEA,MAAM,MAAS,GAAW,EAAE,IAAU,EAA2B;QAC/D,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAiB,KAAK;YAC9D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC,WAAW,CAAC;QAC1B;IACF;IAEA,MAAM,OAAU,GAAW,EAA2B;QACpD,IAAI;YACF,MAAM,WAAW,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAiB;YAC1D,OAAO,SAAS,IAAI;QACtB,EAAE,OAAO,OAAO;YACd,OAAO,IAAI,CAAC,WAAW,CAAC;QAC1B;IACF;IAEQ,YAAY,KAAU,EAAsB;QAClD,IAAI,gJAAK,CAAC,YAAY,CAAC,QAAQ;YAC7B,MAAM,UAAU,MAAM,QAAQ,EAAE,MAAM,WAAW,MAAM,OAAO;YAC9D,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;QACA,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;AACF;AAGO,MAAM,YAAY,IAAI","debugId":null}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/lperez/Workspace/Development/fullstack/guaira_app/apps/guaira-pos-web/app/services/auth.service.ts"],"sourcesContent":["import { apiClient } from './api';\nimport type { LoginRequest, LoginResponse, User } from '../types';\n\nexport const authService = {\n  /**\n   * Login with phone and password\n   */\n  async login(credentials: LoginRequest) {\n    const response = await apiClient.post<LoginResponse>('/auth/login', credentials);\n\n    if (response.success && response.data) {\n      // Store auth data in localStorage\n      localStorage.setItem('auth_token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n\n    return response;\n  },\n\n  /**\n   * Logout - clear auth data\n   */\n  logout() {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n  },\n\n  /**\n   * Get current user from localStorage\n   */\n  getCurrentUser(): User | null {\n    const userStr = localStorage.getItem('user');\n    if (!userStr) return null;\n\n    try {\n      return JSON.parse(userStr);\n    } catch {\n      return null;\n    }\n  },\n\n  /**\n   * Check if user is authenticated\n   */\n  isAuthenticated(): boolean {\n    return !!localStorage.getItem('auth_token');\n  },\n\n  /**\n   * Register new user\n   */\n  async register(data: { phone: string; email?: string; name?: string; password: string }) {\n    return await apiClient.post<LoginResponse>('/auth/register', data);\n  },\n\n  /**\n   * Request password reset\n   */\n  async requestPasswordReset(phone: string) {\n    return await apiClient.post('/auth/password-reset/request', { phone });\n  },\n\n  /**\n   * Verify password reset code\n   */\n  async verifyResetCode(phone: string, code: string) {\n    return await apiClient.post('/auth/password-reset/verify', { phone, code });\n  },\n\n  /**\n   * Reset password with code\n   */\n  async resetPassword(phone: string, code: string, newPassword: string) {\n    return await apiClient.post('/auth/password-reset/confirm', {\n      phone,\n      code,\n      newPassword,\n    });\n  },\n\n  /**\n   * Refresh auth token\n   */\n  async refreshToken() {\n    const refreshToken = localStorage.getItem('refresh_token');\n    if (!refreshToken) {\n      throw new Error('No refresh token available');\n    }\n\n    const response = await apiClient.post<LoginResponse>('/auth/refresh', {\n      refreshToken,\n    });\n\n    if (response.success && response.data) {\n      localStorage.setItem('auth_token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n\n    return response;\n  },\n};\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,cAAc;IACzB;;GAEC,GACD,MAAM,OAAM,WAAyB;QACnC,MAAM,WAAW,MAAM,mIAAS,CAAC,IAAI,CAAgB,eAAe;QAEpE,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;YACrC,kCAAkC;YAClC,aAAa,OAAO,CAAC,cAAc,SAAS,IAAI,CAAC,KAAK;YACtD,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,SAAS,IAAI,CAAC,IAAI;QAChE;QAEA,OAAO;IACT;IAEA;;GAEC,GACD;QACE,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC1B;IAEA;;GAEC,GACD;QACE,MAAM,UAAU,aAAa,OAAO,CAAC;QACrC,IAAI,CAAC,SAAS,OAAO;QAErB,IAAI;YACF,OAAO,KAAK,KAAK,CAAC;QACpB,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA;;GAEC,GACD;QACE,OAAO,CAAC,CAAC,aAAa,OAAO,CAAC;IAChC;IAEA;;GAEC,GACD,MAAM,UAAS,IAAwE;QACrF,OAAO,MAAM,mIAAS,CAAC,IAAI,CAAgB,kBAAkB;IAC/D;IAEA;;GAEC,GACD,MAAM,sBAAqB,KAAa;QACtC,OAAO,MAAM,mIAAS,CAAC,IAAI,CAAC,gCAAgC;YAAE;QAAM;IACtE;IAEA;;GAEC,GACD,MAAM,iBAAgB,KAAa,EAAE,IAAY;QAC/C,OAAO,MAAM,mIAAS,CAAC,IAAI,CAAC,+BAA+B;YAAE;YAAO;QAAK;IAC3E;IAEA;;GAEC,GACD,MAAM,eAAc,KAAa,EAAE,IAAY,EAAE,WAAmB;QAClE,OAAO,MAAM,mIAAS,CAAC,IAAI,CAAC,gCAAgC;YAC1D;YACA;YACA;QACF;IACF;IAEA;;GAEC,GACD,MAAM;QACJ,MAAM,eAAe,aAAa,OAAO,CAAC;QAC1C,IAAI,CAAC,cAAc;YACjB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,WAAW,MAAM,mIAAS,CAAC,IAAI,CAAgB,iBAAiB;YACpE;QACF;QAEA,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;YACrC,aAAa,OAAO,CAAC,cAAc,SAAS,IAAI,CAAC,KAAK;YACtD,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,SAAS,IAAI,CAAC,IAAI;QAChE;QAEA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":["file:///Users/lperez/Workspace/Development/fullstack/guaira_app/apps/guaira-pos-web/app/store/authStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport type { AuthState, User } from '../types';\nimport { authService } from '../services/auth.service';\n\ninterface AuthStore extends AuthState {\n  login: (phone: string, password: string) => Promise<void>;\n  logout: () => void;\n  setUser: (user: User | null) => void;\n  initialize: () => void;\n}\n\nexport const useAuthStore = create<AuthStore>((set) => ({\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: true,\n\n  initialize: () => {\n    const user = authService.getCurrentUser();\n    const token = localStorage.getItem('auth_token');\n    set({\n      user,\n      token,\n      isAuthenticated: !!token,\n      isLoading: false,\n    });\n  },\n\n  login: async (phone: string, password: string) => {\n    set({ isLoading: true });\n    try {\n      const response = await authService.login({ phone, password });\n      if (response.success && response.data) {\n        set({\n          user: response.data.user,\n          token: response.data.token,\n          isAuthenticated: true,\n          isLoading: false,\n        });\n      } else {\n        throw new Error(response.error || 'Login failed');\n      }\n    } catch (error) {\n      set({ isLoading: false });\n      throw error;\n    }\n  },\n\n  logout: () => {\n    authService.logout();\n    set({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n    });\n  },\n\n  setUser: (user: User | null) => {\n    set({ user });\n  },\n}));\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;AASO,MAAM,eAAe,IAAA,kJAAM,EAAY,CAAC,MAAQ,CAAC;QACtD,MAAM;QACN,OAAO;QACP,iBAAiB;QACjB,WAAW;QAEX,YAAY;YACV,MAAM,OAAO,iJAAW,CAAC,cAAc;YACvC,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI;gBACF;gBACA;gBACA,iBAAiB,CAAC,CAAC;gBACnB,WAAW;YACb;QACF;QAEA,OAAO,OAAO,OAAe;YAC3B,IAAI;gBAAE,WAAW;YAAK;YACtB,IAAI;gBACF,MAAM,WAAW,MAAM,iJAAW,CAAC,KAAK,CAAC;oBAAE;oBAAO;gBAAS;gBAC3D,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;oBACrC,IAAI;wBACF,MAAM,SAAS,IAAI,CAAC,IAAI;wBACxB,OAAO,SAAS,IAAI,CAAC,KAAK;wBAC1B,iBAAiB;wBACjB,WAAW;oBACb;gBACF,OAAO;oBACL,MAAM,IAAI,MAAM,SAAS,KAAK,IAAI;gBACpC;YACF,EAAE,OAAO,OAAO;gBACd,IAAI;oBAAE,WAAW;gBAAM;gBACvB,MAAM;YACR;QACF;QAEA,QAAQ;YACN,iJAAW,CAAC,MAAM;YAClB,IAAI;gBACF,MAAM;gBACN,OAAO;gBACP,iBAAiB;YACnB;QACF;QAEA,SAAS,CAAC;YACR,IAAI;gBAAE;YAAK;QACb;IACF,CAAC","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///Users/lperez/Workspace/Development/fullstack/guaira_app/apps/guaira-pos-web/app/providers.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect } from 'react'\nimport { SessionProvider } from 'next-auth/react'\nimport { useAuthStore } from './store/authStore'\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  const { initialize } = useAuthStore()\n\n  useEffect(() => {\n    initialize()\n  }, [initialize])\n\n  return (\n    <SessionProvider>\n      {children}\n    </SessionProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,yIAAY;IAEnC,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAW;IAEf,qBACE,8OAAC,iKAAe;kBACb;;;;;;AAGP","debugId":null}}]
}